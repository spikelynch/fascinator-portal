<p>If you want to use Jaffa using just the features shown so far you could have
    a fully functional form already. However one of the goals we originally had
    for the project was to make handling large forms much easier. In this light
    the features we've shown so far can really just be considered as building
    blocks... widgets is where it's really at.</p>
<p>Several widgets ship with Jaffa to make building a feature rich form very
    easy (a number are demo'd on this page), but you can also build your own
    widgets to add to the toolkit. This setup is intended for use in
    environments where parts of the dev team can do the work on widget design,
    and others can focus on metadata and form layout.</p>

<h3>Some Basics</h3>
<p>Widgets are generally designed to be called like existing jQuery UI Widgets,
    in that a basic DOM element is targeted. We do require an ID attribute on
    this DOM element. eg:</p>
<pre class="prettyprint lang-js">
&lt;div id="dropDownWidgetSample"&gt;&lt;/div&gt;
</pre>
<p>With regards to styling widgets, the base widget (which all widgets extend)
    will take care of injecting additional classes you request, as long as you
    provide them as part of your config
    (<code class="prettyprint">"class-list": widgetBranding</code>). For the sake
    of brevity the examples below don't show this, but most inject a class
    structure something like this:</p>
<pre class="prettyprint lang-js">
var widgetBranding = {
    "": ["control-group"],
    "label.widgetLabel": ["control-label"],
    "label.radioLabel": ["radio", "inline"],
    ".jaffaValidationError": ["alert", "alert-error"]
};
</pre>
<p>All this is doing is looking at the selector value on the left and injecting
    the extra classes on the right (in this case Boostrap classes). All the
    selectors are constrained to being children of the top-level container element,
    and the empty selector used for the first value targets the container itself.
    Given that many widgets implement jQuery UI widgets for controls this usually
    leaves you with a few options for branding:</p>
<ol>
    <li>Target Jaffa's own class structure. Jaffa makes no efforts to style form
        elements, but it does usually sprinkle classes lightly through whatever
        it is doing. Usually just to act as a selector, or for your local
        customisation.</li>
    <li>Target jQuery UI's classes if the widget in question (or your page) is
        making use of them. Check out the 'Styling' tab as well for some jQuery UI
        themes.</li>
    <li>Inject classes from your local CSS framework as per above. The demo is
        doing this with Bootstrap to try and play nice with external frameworks.
        Plus Bootstrap just has some dead-sexy basic form elements.</li>
</ol>

<h3>Default Widgets</h3>
<p>Some examples of the basic widgets that ship in Jaffa. With varying configuration
    there are more options then displayed here, but this covers the high notes.
    Each widget has its configuration in the contextual help elements attached
    to it, so just click the question marks if you want to see how things are done.</p>
<div id="widgetsAccordian">

<!-- *****************************************
    TEXT WIDGETS
 ***************************************** -->
<h4><a href="#">Text Fields</a></h4>
<div class="thumbnail tabbed-widget-demos">
    <p>The humble text input is (at face value) fairly basic, but Jaffa offers a few
        features that let you do some interesting stuff with a text widget.</p>
    <div id="text-widgets">
        <h3 jaffa-tab-id="text-widget-basic">Basic</h3>
        <div id="text-widget-basic">
            <!-- BASIC -->
            <p>The simplest of examples first though.</p>
            <div id="textWidgetSimple"></div>
            <div id="textWidgetSimpleHelp">
                <div class="ui-state-highlight jaffaHelpContent"><span class="ui-icon ui-icon-info"></span>
                    <p>As you can see, the config is fairly simple. In fact we've
                        put more effort into attaching this help text then the
                        widget itself takes to get up and running.</p>
<pre class="prettyprint lang-html">
&lt;div id="textWidgetSimple"&gt;&lt;/div&gt;
&lt;div id="textWidgetSimpleHelp"&gt;... all this stuff...&lt;/div&gt;
</pre>
<pre class="prettyprint lang-js">
$("#textWidgetSimple").jaffaText({
    "label": "A text field:",
    "field": "simpleTextField",
    "help-content": "#textWidgetSimpleHelp",
    "mandatory": true
});
</pre>
                </div>
            </div>

            <!-- TEXTAREA -->
            <p>Or we can change it into a <code class="prettyprint">&lt;textarea/&gt;</code> with very little effort. We also added a default value... cutting edge stuff.</p>
            <div id="textWidgetTextarea"></div>
            <div id="textWidgetTextareaHelp">
                <div class="ui-state-highlight jaffaHelpContent"><span class="ui-icon ui-icon-info"></span>
                    <p>All we had to do was provide the <code class="prettyprint">textarea</code>
                        config entry and the widget will adjust. The <code class="prettyprint">rows</code>
                        and <code class="prettyprint">cols</code> are optional,
                        since your styles may be a better way of setting these
                        dimensions. The widget will still create a
                        <code class="prettyprint">&lt;textarea/&gt</code> without
                        them. There is no error checking on what you provide
                        here by the way, so if you provide nonsense values, the
                        browser will decide what it wants to do with them.</p>
<pre class="prettyprint lang-html">
&lt;div id="textWidgetTextarea"&gt;&lt;/div&gt;
&lt;div id="textWidgetTextareaHelp"&gt;... all this stuff...&lt;/div&gt;
</pre>
<pre class="prettyprint lang-js">
$("#textWidgetTextarea").jaffaText({
    "label": "A textarea:",
    "field": "simpleTextarea",
    "default-value": "I have a default value...",
    "help-content": "#textWidgetTextareaHelp",
    "textarea": {
        "rows": "5",
        "cols": "40"
    }
});
</pre>
                </div>
            </div>

            <p>Next, the 'Validating Text' tab shows how the widgets can integrate
                with Validatious.</p>
        </div>

        <h3 jaffa-tab-id="text-widget-validation">Validating Text</h3>
        <div id="text-widget-validation">
            <p>Back on the 'Validation' tab we got our first look Validatious,
                which is especially useful when it comes to validating text fields.
                Most other controls/widgets tend to deal with fixed vocabularies
                and/or formats (like dates), so we generally just allow simple
                <code class="prettyprint">mandatory</code> flags in their config
                (you can target the underlying field with your own validation
                though if you want to get fancy).</p>
            <p>A text field is pretty wide open though, and this widget has no
                such luxury. With so many <a href="http://validatious.org/learn/references/validators">validators</a>
                built in to Validatious for handling text however, the focus of
                the widget is mainly on letting you pick and choose from validation
                rules and provide custom responses in the UI. Providing this sort
                of validation config (<code class="prettyprint">v2Rules</code>)
                <b>does</b> take preference over a basic
                <code class="prettyprint">mandatory</code> flag, so remember to
                add a Validatious <code class="prettyprint">required</code> rule
                if you want the field to be mandatory.</p>

            <!-- OPTIONAL URL -->
            <p>Here's an example of an mandatory field, and it only accepts URLs.</p>
            <div id="textWidgetUrl"></div>
            <div id="textWidgetUrlHelp">
                <div class="ui-state-highlight jaffaHelpContent"><span class="ui-icon ui-icon-info"></span>
                    <p>So the presence of the <code class="prettyprint">v2Rules</code>
                        property is the first thing the widget is looking for,
                        then each rule needs to have a name. The widget uses this
                        for its own index, as well as notifying Jaffa of a new
                        rule using this name (as per the core validation process).
                        If you don't provide a message for the rule, this name
                        will also be the only feedback you receive on screen
                        (ie. it failed).</p>
<pre class="prettyprint lang-html">
&lt;div id="textWidgetUrl"&gt;&lt;/div&gt;
&lt;div id="textWidgetUrlHelp"&gt;... all this stuff...&lt;/div&gt;
</pre>
<pre class="prettyprint lang-js">
$("#textWidgetUrl").jaffaText({
    "label": "Enter a URL:",
    "field": "urlTextField",
    "help-content": "#textWidgetUrlHelp",
    "v2Rules": {
        "mandatory": {
            "validator": "required"
        },
        "needsUrl": {
            "validator": "url",
            "message": "I asked for a URL dumb-ass!"
        }
    }
});
</pre>
                </div>
            </div>

            <!-- PASSWORD COMPLEXITY -->
            <p>And another example, this time of a slightly more complicated set
                of rules that also require parameters. We are going to do a trivial
                password complexity test (REALLY trivial, this <b>isn't</b> an example
                of good practice in password complexity) using only the Validatious
                built-in validators.</p>
            <div id="textWidgetPassword"></div>
            <div id="textWidgetPasswordHelp">
                <div class="ui-state-highlight jaffaHelpContent"><span class="ui-icon ui-icon-info"></span>
                    <p>Config is starting to get a bit longer now, but it's still
                        fairly simple though. We've introduced the syntax for
                        providing parameters to validators that required them,
                        and we also snuck in a new <code class="prettyprint">type</code>
                        option to turn our input into a password field.</p>
<pre class="prettyprint lang-html">
&lt;div id="textWidgetPassword"&gt;&lt;/div&gt;
&lt;div id="textWidgetPasswordHelp"&gt;... all this stuff...&lt;/div&gt;
</pre>
<pre class="prettyprint lang-js">
$("#textWidgetPassword").jaffaText({
    "label": "Enter a password:",
    "field": "passwordComplexityTextField",
    "type": "password",
    "help-content": "#textWidgetPasswordHelp",
    "v2Rules": {
        "mandatory": {
            "validator": "required",
            "message": "A password is required!"
        },
        "noSpecialCharacters": {
            "validator": "alphanum",
            "message": "Only alpha-numeric characters are allowed. eg: a-z, A-Z, 0-9"
        },
        "min4": {
            "validator": "min-length",
            "params": [4],
            "message": "Only passwords of betweeen 4 and 8 characters are allowed."
        },
        "max8": {
            "validator": "max-length",
            "params": [9], // <= Bug in Validatious. It uses '<' rather then '<='
            // http://cjohansen.lighthouseapp.com/projects/16714/tickets/7-max-length#ticket-7-1
            "message": "Only passwords of betweeen 4 and 8 characters are allowed."
        }
    }
});
</pre>
                </div>
            </div>

        </div>

        <h3 jaffa-tab-id="text-widget-lookups">Lookups</h3>
        <div id="text-widget-lookups">
            <!-- Basic Lookups -->
            <p>Text widgets support a few different types of lookups; basically
                anything that <a href="http://jqueryui.com/demos/autocomplete/">jQuery UI's Autocomplete</a>
                can do. For the more basic types of Autocomplete, there is little
                more then wrapping going on, and you can provide both local and
                remote data for identical results. This first example shows the simple
                static String approach (<code class="prettyprint">["value1", "value2"]</code>)
                for both a local data source.</p>
            <div id="textWidgetLookupBasic"></div>
            <div id="textWidgetLookupBasicHelp">
                <div class="ui-state-highlight jaffaHelpContent"><span class="ui-icon ui-icon-info"></span>
                    <p>There's hardly anything to this config at all, since the
                        widget just passes the value of <code class="prettyprint">lookup-data</code>
                        straight to jQuery UI.</p>
<pre class="prettyprint lang-html">
&lt;div id="textWidgetLookupBasic"&gt;&lt;/div&gt;
&lt;div id="textWidgetLookupBasicHelp"&gt;... all this stuff...&lt;/div&gt;
</pre>
<pre class="prettyprint lang-js">
var data = ["value1", "value2"];
$("#textWidgetLookupBasic").jaffaText({
    "label": "Local: ",
    "field": "autoTextLookupStatic1",
    "help-content": "#textWidgetLookupBasicHelp",
    "lookup-data": data
});
</pre>
                </div>
            </div>

            <p>This field pulls the autocomplete values from a URL, and has a
                very small increase to complexity of data structure. The suggestions
                will look identical to the first, but an underlying value you don't
                see is actually inserted into the input.</p>
            <div id="textWidgetLookupBasicRemote"></div>
            <div id="textWidgetLookupBasicRemoteHelp">
                <div class="ui-state-highlight jaffaHelpContent"><span class="ui-icon ui-icon-info"></span>
                    <p>Almost identical to above, except this time we use a URL.</p>
<pre class="prettyprint lang-html">
&lt;div id="textWidgetLookupBasicRemote"&gt;&lt;/div&gt;
&lt;div id="textWidgetLookupBasicRemoteHelp"&gt;... all this stuff...&lt;/div&gt;
</pre>
<pre class="prettyprint lang-js">
$("#textWidgetLookupBasicRemote").jaffaText({
    "label": "Remote: ",
    "field": "autoTextLookupStatic2",
    "help-content": "#textWidgetLookupBasicRemoteHelp",
    "lookup-data": "data/static.json"
});
</pre>
                </div>
            </div>

            <!-- Rich Lookups -->
            <p>Finally, we have a pretty complicated usage of the widget, which
                involves searching a datasource (cross-domain or otherwise) and
                handling the data when it returns. For the sake of demonstration
                this example recreates the <a href="http://geonames.org/">geonames.org</a>
                search that the <a href="http://jqueryui.com/demos/autocomplete/#remote-jsonp">jQuery UI doco</a>
                uses.</p>
            <p>What the widget brings to the table here is the ability to 'walk'
                a JSON data structure and find any fields you have flagged as
                important. The fields can then be pushed into any templated
                Strings you like and distributed throughout your form as outputs.
                Try the demo and see what happens, although keep in mind that
                Geonames can be a tad slow at times. The original authors of
                Jaffa do something similar to this against a
                <a href="http://code.google.com/p/solr-geonames/">local Geonames cache</a>
                for speed in production. As always, if you want more details on
                the particulars of this demo open the help text.</p>
            <p>This usage represents a reasonable limit to what is offered by
                generic widgets. Anything more specific should probably be spun
                off into its own widget, or even make direct use of underlying
                library features. As the help text points out, this lookup has
                constraints you can exceed if you were to make direct use of
                jQuery UI.</p>
            <div id="textWidgetLookupGeonames"></div>
            <div>
                <input class="jaffa-field span5" type="text" id="textWidgetLookupGeonamesOutput" size="40" value="Don't search here, search up there ^^^" />
                <div id="textWidgetLookupGeonamesLatLong"></div>
            </div>
            <div id="textWidgetLookupGeonamesHelp">
                <div class="ui-state-highlight jaffaHelpContent"><span class="ui-icon ui-icon-info"></span>
                    <p>So the top of our config looks fairly normal, but after
                        providing a data source URL we then provide two new config
                        elements that are reasonably complicated. Below they are
                        explored in more detail:</p>
                    <dl>
                        <dt><code class="prettyprint">lookup-request</code> All of the config for building a request before it is sent.</dt>
                        <dd>
                            <ul>
                                <li><code class="prettyprint">data-type</code> Defaults to 'json'. You would only need
                                    to change this to 'jsonp' if you are making a cross-domain request.</li>
                                <li><code class="prettyprint">term-field</code> The field your search term will be sent
                                    in. Defaults to 'q', although you probably should provide this as 'q' is just a
                                    guess to try before failing.</li>
                                <li><code class="prettyprint">term-quote</code> Flag whether or not search term(s) should
                                    be quoted on sending. Defaults to <code class="prettyprint">true</code>.</li>
                            </ul>
                        </dd>
                        <dt><code class="prettyprint">lookup-parser</code> All of the config for parsing a response after the data source returns.</dt>
                        <dd>
                            <ul>
                                <li><code class="prettyprint">results-path</code> An array of Strings that are used as JSON
                                    properties to 'walk' down heirarchical data from the root. This should target an array
                                    where each element is considered an 'item' in the suggestions drop-down. There is no
                                    default value.</li>
                                <li><code class="prettyprint">fields</code> Each property in this object is an alias you'd
                                    like to use to create a 'field' from the data returned. The Arrays assigned to each
                                    property are a path used just as above, allowing you to address deeply nested data
                                    structures if required (the demo is only lightly nested).</li>
                                <li><code class="prettyprint">outputs</code> The output properties/keys serve two purposes:
                                    <ol>
                                        <li>Each output will become a property of the 'item' that passes through the autocomplete
                                            plugin. For this reason the <code class="prettyprint">label</code> and
                                            <code class="prettyprint">value</code> outputs are very important (the UI uses them).
                                            The widget will try to insert them if you forget, but your data structure would have
                                            to match the jQuery UI default for this to work. The real value comes from the fact
                                            that additional properties beyond those minimums are kept in tact by the plugin and
                                            become accessible again after an option is selected... bringing us to...</li>
                                        <li>Once a suggestion is selected, the widget will look through each output (except the
                                            mandatories) and try to route them to somewhere meaningful. First it try to find a
                                            form field it manages that matches (the <code class="prettyprint">&lt;input /&gt;</code>
                                            in our demo) and update the value of the field to match. Failing this it will try to
                                            treat it as a jQuery selector (anywhere in the document, not inside the widget) and
                                            the elements contents (a basic <code class="prettyprint">$().html()</code> call, also
                                            used in the demo).</li>
                                    </ol>
                                    <p>Output values are basic template that will substitute in the field aliases from above wherever
                                        you put a placeholder. There is no additional logic going on under the hood when these templates
                                        are parsed, so missing values will just leave a placeholder. This would tend to make the widget
                                        mostly useful on stable data sources with fairly reliable data.</p>
                                </li>
                            </ul>
                        </dd>
                    </dl>
                    <p>Overall this approach works, but within the tightly constrained parameters already demonstrated by the configuration.
                        If the search pattern is particularly complicated the simple URL appending used will likely fail, or if the data
                        returned requires massaging and more fine grained decision making during parsing then this widget will probably
                        not help.</p>
<pre class="prettyprint lang-html">
&lt;div id="textWidgetLookupGeonames"&gt;&lt;/div&gt;
&lt;div&gt;
    &lt;input class="jaffa-field span5" type="text" id="textWidgetLookupGeonamesOutput" size="40" value="Don't search here, search up there ^^^" /&gt;
    &lt;div id="textWidgetLookupGeonamesLatLong"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id="textWidgetLookupGeonamesHelp"&gt;... all this stuff...&lt;/div&gt;
</pre>
<pre class="prettyprint lang-js">
$("#textWidgetLookupGeonames").jaffaText({
    "label": "City Name: ",
    "field": "autoTextLookupGeonames",
    "help-content": "#textWidgetLookupGeonamesHelp",
    "lookup-data": "http://ws.geonames.org/searchJSON?featureClass=P&style=full&maxRows=12",
    "lookup-request": {
        "data-type": "jsonp",
        "term-field": "name_startsWith",
        "term-quote": true
    },
    "lookup-parser": {
        "results-path": ["geonames"],
        "fields": {
            "name": ["toponymName"],
            "country": ["countryName"],
            "lat": ["lat"],
            "long": ["lng"]
        },
        "outputs": {
            "label": "${name}, ${country}",
            "value": "${name}, ${country}",
            "textWidgetLookupGeonamesOutput": "${name}, ${country}",
            "#textWidgetLookupGeonamesLatLong": "<b>Lat:</b> ${lat}, <b>Long:</b> ${long}"
        }
    }
});
</pre>
                </div>
            </div>

        </div>
    </div>
</div>
<script type="text/javascript">
    <!--//
        function textWidgetDemos(jaffa) {
            jaffa.ui.changeToTabLayout($("#text-widgets"), "h3");
            var widgetBranding = {
                "": ["control-group"],
                "label.widgetLabel": ["control-label"],
                "label.radioLabel": ["radio", "inline"],
                ".jaffaValidationError": ["alert", "alert-error"]
            };

            // Basic
            $("#textWidgetSimple").jaffaText({
                "label": "A text field:",
                "field": "simpleTextField",
                "class-list": widgetBranding,
                "help-content": "#textWidgetSimpleHelp",
                "mandatory": true
            });
            $("#textWidgetTextarea").jaffaText({
                "label": "A textarea:",
                "field": "simpleTextarea",
                "class-list": widgetBranding,
                "default-value": "I have a default value...",
                "help-content": "#textWidgetTextareaHelp",
                "textarea": {
                    "rows": "5",
                    "cols": "40"
                }
            });
            // Validation
            $("#textWidgetUrl").jaffaText({
                "label": "Enter a URL:",
                "field": "urlTextField",
                "class-list": widgetBranding,
                "help-content": "#textWidgetUrlHelp",
                "v2Rules": {
                    "mandatoryUrl": {
                        "validator": "required"
                    },
                    "needsUrl": {
                        "validator": "url",
                        "message": "I asked for a URL dumb-ass!"
                    }
                }
            });
            $("#textWidgetPassword").jaffaText({
                "label": "Enter a password:",
                "field": "passwordComplexityTextField",
                "type": "password",
                "class-list": widgetBranding,
                "help-content": "#textWidgetPasswordHelp",
                "v2Rules": {
                    "mandatoryPassword": {
                        "validator": "required",
                        "message": "A password is required!"
                    },
                    "noSpecialCharacters": {
                        "validator": "alphanum",
                        "message": "Only alpha-numeric characters are allowed. eg: a-z, A-Z, 0-9"
                    },
                    "min4": {
                        "validator": "min-length",
                        "params": [4],
                        "message": "Only passwords of betweeen 4 and 8 characters are allowed."
                    },
                    "max8": {
                        "validator": "max-length",
                        "params": [9], // <= Bug in Validatious. It uses '<' rather then '<='
                        // http://cjohansen.lighthouseapp.com/projects/16714/tickets/7-max-length#ticket-7-1
                        "message": "Only passwords of betweeen 4 and 8 characters are allowed."
                    }
                }
            });
            // Lookups
            var data = ["value1", "value2"];
            $("#textWidgetLookupBasic").jaffaText({
                "label": "Local: ",
                "field": "autoTextLookupStatic1",
                "class-list": widgetBranding,
                "help-content": "#textWidgetLookupBasicHelp",
                "lookup-data": data
            });
            $("#textWidgetLookupBasicRemote").jaffaText({
                "label": "Remote: ",
                "field": "autoTextLookupStatic2",
                "class-list": widgetBranding,
                "help-content": "#textWidgetLookupBasicRemoteHelp",
                "lookup-data": "data/static.json"
            });
            $("#textWidgetLookupGeonames").jaffaText({
                "label": "City Name: ",
                "field": "autoTextLookupGeonames",
                "class-list": widgetBranding,
                "help-content": "#textWidgetLookupGeonamesHelp",
                "lookup-data": "http://ws.geonames.org/searchJSON?featureClass=P&style=full&maxRows=12",
                "lookup-request": {
                    "method": "GET",
                    "data-type": "jsonp",
                    "term-field": "name_startsWith",
                    "term-quote": true
                },
                "lookup-parser": {
                    "results-path": ["geonames"],
                    "fields": {
                        "name": ["toponymName"],
                        "country": ["countryName"],
                        "lat": ["lat"],
                        "long": ["lng"]
                    },
                    "outputs": {
                        "label": "${name}, ${country}",
                        "value": "${name}, ${country}",
                        "textWidgetLookupGeonamesOutput": "${name}, ${country}",
                        "#textWidgetLookupGeonamesLatLong": "<b>Lat:</b> ${lat}, <b>Long:</b> ${long}"
                    }
                }
            });
        }
    //-->
</script>


<!-- *****************************************
    SELECT WIDGETS
 ***************************************** -->
<h4><a href="#">Selects / Drop Downs</a></h4>
<div class="thumbnail tabbed-widget-demos">
    <div id="select-widgets">
        <h3 jaffa-tab-id="select-widget-basic">Basic</h3>
        <div id="select-widget-basic">

            <!-- Basic static -->
            <p>The most basic of drop downs using static data. This particular
                widget also happens to back into server managed data that Jaffa
                grabbed at startup, so you should see that the second value is
                selected now despite it not being the default or first in the
                list. All Jaffa fields (and by extension widgets) are synch'd to
                server data during Jaffa's startup.</p>
            <div id="formSelectWidget"></div>
            <div id="formSelectWidgetHelp">
                <div class="ui-state-highlight jaffaHelpContent"><span class="ui-icon ui-icon-info"></span>
                    <p>We have provided config with what the <code class="prettyprint">&lt;option&gt;</code>
                        elements should contain (both value and label).</p>
<pre class="prettyprint lang-html">
&lt;div id="formSelectWidget"&gt;&lt;/div&gt;
&lt;div id="formSelectWidgetHelp"&gt;... all this stuff...&lt;/div&gt;
</pre>
<pre class="prettyprint lang-js">
$("#formSelectWidget").jaffaDropDown({
    "label": "Drop Down / Select:",
    "field": "formSelect",
    "option-data": [
        {"value": "value3",  "label": "Value 3 (This label is not stored)"},
        {"value": "value4",  "label": "Value 4 (This label is not stored)"}
    ],
    "help-content": "#formSelectWidgetHelp"
});
</pre>
                </div>
            </div>

            <!-- Stored label + default value -->
            <p>In counterpoint to the above example, this drop down has not loaded
                any server data, but we've explicitly defined a default whilst
                still allowing the user to 'opt-out'.</p>
            <div id="dropDownWidgetDefault"></div>
            <div id="dropDownWidgetDefaultHelp">
                <div class="ui-state-highlight jaffaHelpContent"><span class="ui-icon ui-icon-info"></span>
                    <p>We've altered the label used on empty values to be a more
                        contextually appropriate 'opt-out', and we've also defaulted
                        a selection.</p>
<pre class="prettyprint lang-html">
&lt;div id="dropDownWidgetDefault"&gt;&lt;/div&gt;
&lt;div id="dropDownWidgetDefaultHelp"&gt;... all this stuff...&lt;/div&gt;
</pre>
<pre class="prettyprint lang-js">
$("#dropDownWidgetDefault").jaffaDropDown({
    "label": "Gender:",
    "field": "dropDownDefault",
    "empty-text": "I'd Rather Not Say",
    "option-data": [
        {"value": "male",   "label": "Male"},
        {"value": "female", "label": "Female"}
    ],
    "default-value": "male",
    "help-content": "#dropDownWidgetDefaultHelp"
});
</pre>
                </div>
            </div>
        </div>

        <h3 jaffa-tab-id="select-widget-vocab">Vocabularies</h3>
        <div id="select-widget-vocab">

            <!-- Populated by lookup -->
            <p>A drop-down is a fairly typical control for representing controlled
                vocabularies. You may load the vocabulary statically as we demonstrated
                on the previous tab, or you might instruct the widget to go and get
                the data from a vocabulary service or an AJAX interface lightly
                wrapping an application's database.</p>
            <p>This drop down references a <a href="data/dropDownSample1.json">static file</a>
                showing the colours of the rainbow. We still allow an empty value
                in the GUI, since we don't want the user to ignore the field and
                accept a default selection that will accidentally treated as valid.
                To make them select something we'll make it mandatory as well, so
                the form submission will not accept it. For the demo you can test
                with a blur() event however.</p>
            <div id="dropDownWidgetSample"></div>
            <div id="dropDownWidgetSampleHelp">
                <div class="ui-state-highlight jaffaHelpContent"><span class="ui-icon ui-icon-info"></span>
                    <p>Obviously our static option data is gone, and has been
                        replaced with a <code class="prettyprint">json-data-url</code>.
                        Another new addition here is the <code class="prettyprint">label-field</code>
                        config instructing the widget that we would like to store
                        both the value and the label. The label is stored in a
                        hidden input, but you can look for that field name on the
                        'Data' tab, or in the page's DOM beside the drop-down with
                        your dev tools of choice.</p>
<pre class="prettyprint lang-html">
&lt;div id="dropDownWidgetSample"&gt;&lt;/div&gt;
&lt;div id="dropDownWidgetSampleHelp"&gt;... all this stuff...&lt;/div&gt;
</pre>
<pre class="prettyprint lang-js">
$("#dropDownWidgetSample").jaffaDropDown({
    "label": "Pick a Color:",
    "field": "rainbowColour",
    "label-field": "rainbowColourLabel",
    "json-data-url": "data/dropDownSample1.json",
    "help-content": "#dropDownWidgetSampleHelp",
    "mandatory": true
});
</pre>
                </div>
            </div>

            <!-- Complex data -->
            <p>So if you were to have a look at the <a href="data/dropDownSample1.json">static file</a>
                we linked above, you'll see there's some additional data embedded
                in there that we could make use of. This is very similar to the
                more complicated example we shown in the text widget above.</p>
            <div id="dropDownWidgetComplex"></div>
            <div id="dropDownWidgetComplexOutput" style>
                <p><b>Some things that are <span class="dropDownWidgetComplexColour">{colour}</span></b>: <span id="dropDownWidgetComplexExample">...</span></p>
                <p><b><span class="dropDownWidgetComplexColour">{colour}</span> as a hex colour</b>: <input class="jaffa-field span2" type="text" id="dropDownWidgetComplexHex" size="10"/></p>
            </div>
            <div id="dropDownWidgetComplexHelp">
                <div class="ui-state-highlight jaffaHelpContent"><span class="ui-icon ui-icon-info"></span>
                    <p>As already mentioned the config syntax mostly mirrors that
                        of the more complicated text widget we've seen above. The
                        only notable difference would be loading the data.
                        <code class="prettyprint">json-data-url</code> can be used
                        by any widget, since the underlying base widget will be
                        looking for it and will preload the data before the widget
                        comes online. Our text widget on the other hand needs to
                        use <code class="prettyprint">$().autocomplete()</code>
                        for loading in real time.</p>
                    <p>We can also see here an example of fields that are slightly 
                        more nested, although it still follows the format explained
                        in detail in the text widget's help.</p>
<pre class="prettyprint lang-html">
&lt;div id="dropDownWidgetComplex"&gt;&lt;/div&gt;
&lt;div id="dropDownWidgetComplexOutput" style&gt;
    &lt;p&gt;&lt;b&gt;Some things that are &lt;span class="dropDownWidgetComplexColour"&gt;{colour}&lt;/span&gt;&lt;/b&gt;: &lt;span id="dropDownWidgetComplexExample"&gt;...&lt;/span&gt;&lt;/p&gt;
    &lt;p&gt;&lt;b&gt;&lt;span class="dropDownWidgetComplexColour"&gt;{colour}&lt;/span&gt; as a hex colour&lt;/b&gt;: &lt;input class="jaffa-field span2" type="text" id="dropDownWidgetComplexHex" size="10"/&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id="dropDownWidgetComplexHelp"&gt;... all this stuff...&lt;/div&gt;
</pre>
<pre class="prettyprint lang-js">
$("#dropDownWidgetComplex").jaffaDropDown({
    "label": "Pick a Colour: ",
    "field": "rainbowColourComplex",
    "help-content": "#dropDownWidgetComplexHelp",
    "json-data-url": "data/dropDownSample1.json",
    "default-value": "red",

    "lookup-parser": {
        "results-path": [],
        "fields": {
            "label": ["label"],
            "value": ["value"],
            "examples": ["moreData", "examples"],
            "hexCode": ["moreData", "hexColor"]
        },
        "outputs": {
            "label": "${label}",
            "value": "${value}",
            ".dropDownWidgetComplexColour": "${label}",
            "#dropDownWidgetComplexExample": "${examples}",
            "dropDownWidgetComplexHex": "${hexCode}"
        }
    }
});
</pre>
                </div>
            </div>
        </div>

        <h3 jaffa-tab-id="select-widget-related">Related Data</h3>
        <div id="select-widget-related">
            TODO
        </div>
    </div>
</div>
<script type="text/javascript">
    <!--//
        function selectWidgetDemos(jaffa) {
            jaffa.ui.changeToTabLayout($("#select-widgets"), "h3");
            var widgetBranding = {
                "": ["control-group"],
                "label.widgetLabel": ["control-label"],
                "label.radioLabel": ["radio", "inline"],
                ".jaffaValidationError": ["alert", "alert-error"]
            };

            $("#formSelectWidget").jaffaDropDown({
                "label": "Drop Down / Select:",
                "field": "formSelect",
                "option-data": [
                    {"value": "value3",  "label": "Value 3 (This label is not stored)"},
                    {"value": "value4",  "label": "Value 4 (This label is not stored)"}
                ],
                "class-list": widgetBranding,
                "help-content": "#formSelectWidgetHelp"
            });

            $("#dropDownWidgetDefault").jaffaDropDown({
                "label": "Gender:",
                "field": "dropDownDefault",
                "empty-text": "I'd Rather Not Say",
                "option-data": [
                    {"value": "male",   "label": "Male"},
                    {"value": "female", "label": "Female"}
                ],
                "default-value": "male",
                "class-list": widgetBranding,
                "help-content": "#dropDownWidgetDefaultHelp"
            });

            $("#dropDownWidgetSample").jaffaDropDown({
                "label": "Pick a Colorr:",
                "field": "rainbowColour",
                "label-field": "rainbowColourLabel",
                "json-data-url": "data/dropDownSample1.json",
                "class-list": widgetBranding,
                "help-content": "#dropDownWidgetSampleHelp",
                "mandatory": true
            });

            $("#dropDownWidgetComplex").jaffaDropDown({
                "label": "Pick a Colour: ",
                "field": "rainbowColourComplex",
                "class-list": widgetBranding,
                "help-content": "#dropDownWidgetComplexHelp",
                "json-data-url": "data/dropDownSample1.json",
                "default-value": "red",

                "lookup-parser": {
                    "results-path": [],
                    "fields": {
                        "label": ["label"],
                        "value": ["value"],
                        "examples": ["moreData", "examples"],
                        "hexCode": ["moreData", "hexColor"]
                    },
                    "outputs": {
                        "label": "${label}",
                        "value": "${value}",
                        ".dropDownWidgetComplexColour": "${label}",
                        "#dropDownWidgetComplexExample": "${examples}",
                        "dropDownWidgetComplexHex": "${hexCode}"
                    }
                }
            });
        }
    //-->
</script>


<!-- *****************************************
    RADIO WIDGETS
 ***************************************** -->
<h4><a href="#">Radio Groups</a></h4>
<div class="thumbnail tabbed-widget-demos">
    <div id="radio-widgets">
        <h3 jaffa-tab-id="radio-widget-basic">Basic</h3>
        <div id="radio-widget-basic">
<pre class="prettyprint lang-js">
$("#formRadioWidget").jaffaRadioGroup({
    "label": "Radio Group: ",
    "field": "formRadio",
    "label-field": "formRadioLabel",
    "radio-data": {
        "formRadio1": "Value 1",
        "formRadio2": "Value 2",
        "formRadio3": "Value 3"
    }
});
</pre>
            <div id="formRadioWidgetHolder">
                <div id="formRadioWidgetHelpAfter">Click here for help:</div>
                <div id="formRadioWidget"></div>
            </div>
            <div id="formRadioWidgetHelp">
                <div class="ui-state-highlight jaffaHelpContent"><span class="ui-icon ui-icon-info"></span>
                    <p>Now we'll go a step further and give Jaffa a jQuery selector for where to put our help GUI elements, moving them above the widget.</p>
<pre class="prettyprint lang-js">
TODO
</pre>
                </div>
            </div>
        </div>

        <h3 jaffa-tab-id="radio-widget-validation">Validation</h3>
        <div id="radio-widget-validation">
            TODO
        </div>

        <h3 jaffa-tab-id="radio-widget-lookups">Lookups</h3>
        <div id="radio-widget-lookups">
            TODO
        </div>
    </div>
</div>
<script type="text/javascript">
    <!--//
        function radioWidgetDemos(jaffa) {
            jaffa.ui.changeToTabLayout($("#radio-widgets"), "h3");
            var widgetBranding = {
                "": ["control-group"],
                "label.widgetLabel": ["control-label"],
                "label.radioLabel": ["radio", "inline"],
                ".jaffaValidationError": ["alert", "alert-error"]
            };
            $("#formRadioWidget").jaffaRadioGroup({
                "label": "Radio Group: ",
                "field": "formRadio",
                "label-field": "formRadioLabel",
                "radio-data": {
                    "formRadio1": "Value 1",
                    "formRadio2": "Value 2",
                    "formRadio3": "Value 3"
                },
                "class-list": widgetBranding,
                "help-content": "#formRadioWidgetHelp",
                "help-toggle-after": "#formRadioWidgetHelpAfter",
                "help-toggle-relative": false
            });
        }
    //-->
</script>


<!-- *****************************************
    CHECKBOX WIDGETS
 ***************************************** -->
<h4><a href="#">Checkboxes</a></h4>
<div class="thumbnail tabbed-widget-demos">
    <div id="check-widgets">
        <h3 jaffa-tab-id="check-widget-basic">Basic</h3>
        <div id="check-widget-basic">
            TODO
        </div>

        <h3 jaffa-tab-id="check-widget-validation">Validation</h3>
        <div id="check-widget-validation">
            TODO
        </div>

        <h3 jaffa-tab-id="check-widget-lookups">Lookups</h3>
        <div id="check-widget-lookups">
            TODO
        </div>
    </div>
</div>
<script type="text/javascript">
    <!--//
        function checkboxWidgetDemos(jaffa) {
            jaffa.ui.changeToTabLayout($("#check-widgets"), "h3");
        }
    //-->
</script>


<!-- *****************************************
    CALENDAR WIDGETS
 ***************************************** -->
<h4><a href="#">Calendar Widgets</a></h4>
<div class="thumbnail tabbed-widget-demos">
    <div id="calendar-widgets">
        <h3 jaffa-tab-id="calendar-widget-basic">Basic</h3>
        <div id="calendar-widget-basic">
            TODO
        </div>

        <h3 jaffa-tab-id="calendar-widget-validation">Validation</h3>
        <div id="calendar-widget-validation">
            TODO
        </div>

        <h3 jaffa-tab-id="calendar-widget-lookups">Lookups</h3>
        <div id="calendar-widget-lookups">
            TODO
        </div>
    </div>
</div>
<script type="text/javascript">
    <!--//
        function calendarWidgetDemos(jaffa) {
            jaffa.ui.changeToTabLayout($("#calendar-widgets"), "h3");
        }
    //-->
</script>


<!-- *****************************************
    REPEATABLE WIDGETS
 ***************************************** -->
<h4><a href="#">Repeatable Fields</a></h4>
<div class="thumbnail tabbed-widget-demos">
    <div id="repeat-widgets">
        <h3 jaffa-tab-id="repeat-widget-basic">Basic</h3>
        <div id="repeat-widget-basic">
            <p>Most widgets also offer a 'repeatable' version as well, adding in GUI elements
                required to expand/contract and manage the list. At face value, the core Jaffa
                code has no knowledge of this, but convention amongst widgets is to map this
                into fields of the form, so Jaffa has been made be aware of this convention
                in sorting field names.</p>
            <ul>
                <li>baseField.1.subfieldA</li>
                <li>baseField.1.subfieldB</li>
                <li>baseField.2.subfieldA</li>
                <li>baseField.2.subfieldB</li>
                <li>etc...</li>
            </ul>
<pre class="prettyprint lang-js">
TODO
</pre>

            <!-- Mandatory URLs -->
            <p>A text field with validation attached, requiring at least one URL
                be entered, but allowing others</p>
            <div id="textWidgetUrlRepeatable"></div>
            <div id="textWidgetUrlRepeatableHelp">
                <div class="ui-state-highlight jaffaHelpContent"><span class="ui-icon ui-icon-info"></span>
                    <p>.</p>
<pre class="prettyprint lang-html">
&lt;div id="textWidgetUrlRepeatable"&gt;&lt;/div&gt;
&lt;div id="textWidgetUrlRepeatableHelp"&gt;... all this stuff...&lt;/div&gt;
</pre>
<pre class="prettyprint lang-js">
</pre>
                </div>
            </div>

            <div id="repeatableDropDownSample"></div>
            <div id="repeatableDropDownSampleHelp">
                <div class="ui-state-highlight jaffaHelpContent"><span class="ui-icon ui-icon-info"></span>
                    <p>This help text has been applied to the top-level list widget, with some basic textual help inside each 'child'.</p>
<pre class="prettyprint lang-js">
TODO
</pre>
                </div>
            </div>

            <div id="repeatableRadioGroupSample"></div>
        </div>

        <h3 jaffa-tab-id="repeat-widget-validation">Validation</h3>
        <div id="repeat-widget-validation">
            TODO
        </div>

        <h3 jaffa-tab-id="repeat-widget-lookups">Lookups</h3>
        <div id="repeat-widget-lookups">
            TODO
        </div>
    </div>
</div>
<script type="text/javascript">
    <!--//
        function repeatableWidgetDemos(jaffa) {
            jaffa.ui.changeToTabLayout($("#repeat-widgets"), "h3");
            var widgetBranding = {
                "": ["control-group"],
                "label.widgetLabel": ["control-label"],
                "label.radioLabel": ["radio", "inline"],
                ".jaffaValidationError": ["alert", "alert-error"]
            };
            var widgetListBranding = {
                "": ["control-group", "thumbnail"],
                ".jaffaValidationError": ["alert", "alert-error"]
            };
            $("#textWidgetUrlRepeatable").jaffaTextRepeatable({
                "heading": "<h4>Repeatable Text Widget : 1+ URL(s) required</h4>",
                "base-field": "websiteList",
                "sub-fields": {
                    "field": "url"
                },
                "min-size": 1,
                "child-config": {
                    "label": "Enter a URL:",
                    "field": "url",
                    "v2Rules": {
                        "mandatoryUrlWithMessage": {
                            "validator": "required",
                            "message": "A URL is mandatory"
                        },
                        "needsUrlList": {
                            "validator": "url",
                            "message": "This URL is invalid"
                        }
                    },
                    "class-list": widgetBranding
                },
                "class-list": widgetListBranding,
                "help-content": "#textWidgetUrlRepeatableHelp"
            });

            $("#repeatableDropDownSample").jaffaDropDownRepeatable({
                "heading": "<h4>Repeatable Drop Down Widget (3-5 entries required)</h4>",
                "base-field": "rdf:fake.list:widget",
                "sub-fields": {
                    "field": "dc:identifier",
                    "label-field": "skos:prefLabel"
                },
                "min-size": 3,
                "max-size": 5,
                "child-config": {
                    "field": "dc:identifier",
                    "label-field": "skos:prefLabel",
                    "label": "Please Select: ",
                    "option-data": [
                        {
                            "value": "value1",
                            "label": "Value 1 Label"
                        },
                        {
                            "value": "value2",
                            "label": "Value 2 Label"
                        }
                    ],
                    "class-list": widgetBranding,
                    "help-text": "Some help text.",
                    "mandatory": true,
                    "mandatory-on-save": true
                },
                "class-list": widgetListBranding,
                "help-content": "#repeatableDropDownSampleHelp"
            });
            $("#repeatableRadioGroupSample").jaffaRadioGroupRepeatable({
                "heading": "<h4>Repeatable Radio Group Widget (no limits)</h4>",
                "base-field": "repeatableRadio",
                "sub-fields": {
                    "field": "value",
                    "label-field": "label"
                },
                "disable-numbers": true,
                "disable-sorting": true,
                "child-config": {
                    "field": "value",
                    "label-field": "label",
                    "label": "Pick One: ",
                    "radio-data": {
                        "valueRadio1": "One",
                        "valueRadio2": "Two",
                        "valueRadio3": "Three"
                    },
                    "allow-empty": true,
                    "class-list": widgetBranding
                },
                "class-list": widgetListBranding
            });
        }
    //-->
</script>

<!-- Close accordian -->
</div>


<!-- *****************************************
    CUSTOM WIDGETS
 ***************************************** -->
<h3>Designing Your Own</h3>
<p></p>

<script type="text/javascript">
    <!--//
        function runWidgetDemos(jaffa) {
            textWidgetDemos(jaffa);
            selectWidgetDemos(jaffa);
            radioWidgetDemos(jaffa);
            checkboxWidgetDemos(jaffa);
            calendarWidgetDemos(jaffa);
            repeatableWidgetDemos(jaffa);
            $("#widgetsAccordian").accordion({
                autoHeight: false,
                icons: {
                    header: "ui-icon-circle-arrow-e",
                    headerSelected: "ui-icon-circle-arrow-s"
                }
            });
        }
    //-->
</script>
